<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- BEGIN CHANGE ME -->
    <title>Reproducible Research Through Reusable Code - Workshop Slides</title>
    <meta name="description" content="Reproducible research is the foundation of science. This workshop is tailored for PhD candidates and Research Software Engineers affiliated with Dutch research institutions who would like to learn more about how to apply best practices to make your research reproducible through reusable code.">
    <meta name="author" content="Ole Mussmann, Malte Luken">
    <!-- END CHANGE ME -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="./files/favicon-32x32.png">
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <script src="http://localhost:35729/livereload.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

        <!-- BEGIN YOUR SLIDES -->
        <section
          data-state="blue_overlay yellow_flag yellow_strip purple_half_circle_bottom purple_blob right_e_top"
          data-background-video="./files/Mood video Homepage 2.mp4"
          data-background-video-loop
          data-background-video-muted="true"
          data-markdown>
            <textarea data-template>
              # Reproducible Research
              ## Through Reusable Code

              [Malte Luken](mailto:m.luken@esciencecenter.nl), [Ole Mussmann](mailto:o.mussmann@esciencecenter.nl)
            </textarea>
          </section>

          <section> <!-- start of Introduction -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Introduction -->

          <section> <!-- start of Software Dependencies -->
            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Software Dependencies
              </textarea>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Your code
                ## depends on code
                ### which depends on code
                depending on other code
                <p style="font-size: smaller;"> which depends on code </p>
                <p style="font-size: large;"> ... </p>
              </textarea>
            </section>

            <section data-state="standard">
              <h2>It's code all the way down...</h2>
              <div class="tenor-gif-embed" data-postid="18021411" data-share-method="host" data-aspect-ratio="1.79775" data-width="100%"><a href="https://tenor.com/view/turtles-all-the-way-down-gif-18021411">Turtles All GIF</a>from <a href="https://tenor.com/search/turtles-gifs">Turtles GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            </section>

            <section data-state="standard">
              <h2>... and it's a mess</h2>
              <img src="./files/dependency.png">
              <p style="font-size: smaller;"><a href="https://xkcd.com/2347/">xkcd.com/2347</a></p>
            </section>

            <section data-state="standard 2" data-background-image="./files/carrots-5956003_1920.jpg">
              <!-- Image by <a href="https://pixabay.com/users/igorkocka-19859205/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=5956003">IgorKocka</a> from <a href="https://pixabay.com//?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=5956003">Pixabay</a> -->
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                ## Software ↔️ <span class="fragment">Recipe</span><br>Data ↔️ <span class="fragment">Ingredients</span>

                <img style="height: 30vh;" src="./files/recipe.png">

                <p style="font-size: smaller;">Midjourney, CC-BY-NC 4.0</p>
              </textarea>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                ## Libraries ↔️ <span class="fragment">Pots, Tools</span>

                <img style="height: 30vh;" src="./files/libraries.png">

                <p style="font-size: smaller;">Midjourney, CC-BY-NC 4.0</p>
              </textarea>
            </section>

            <section data-state="standard scroll">
              <h2>Many, <em>Many</em> Tools Wanting to Help</h2>
              <div id="scrollContainer" style="height: 40vh; overflow: hidden;">
                <div style="will-change: transform; position: relative;" id="scrollContent">
                  <ul id="scrollList">
                    <li>Conda</li>
                    <li>Anaconda</li>
                    <li>Miniconda</li>
                    <li>Mamba</li>
                    <li>Pixi</li>
                    <li>pip</li>
                    <li>virtualenv</li>
                    <li>Pipenv</li>
                    <li>pyenv</li>
                    <li>Poetry</li>
                    <li>requirements.txt</li>
                    <li>environment.yml</li>
                    <li>renv</li>
                    <li>uv</li>
                    <li>just</li>
                  </ul>
                </div>
              </div>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                ## Package Managers

                - Define dependencies + versions
                - Install those dependencies
                - Record their versions
                - Isolate environments
                - Manage Python/R versions
                - Enable sharing packages
              </textarea>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                ## [Challenge](https://carpentries-incubator.github.io/reproducible-research-through-reusable-code-in-1-day/software-dependencies.html#tools-and-what-problems-they-try-to-solve)

                <p class="fragment">(see collaborative doc)</p>
                <p class="fragment">(hey, don't peek at the solution!)</p>
              </textarea>
            </section>

            <section data-state="standard">
              <h2>A Time-Capsule for the Future</h2>

              <div style="width: 49%; float: left;">
                <h3>Python</h3>
                <pre style="width: fit-content;"><code data-trim class="language-bash">
                  $ pip freeze > requirements.txt
                </code></pre>

                What does the file contain?
                <br>
                Re-create this environment with:

                <pre style="width: fit-content;"><code data-trim class="language-bash">
                  $ pip install -r requirements.txt
                </code></pre>
                Self-study: <a href="https://carpentries-incubator.github.io/python-intermediate-development/12-virtual-environments.html#creating-virtual-environments-using-venv">Carpentries Lesson</a>
              </div>

              <div class="fragment" style="width: 49%; float: right;">
                <h3>R</h3>
                Initialize renv, and then “save” and “load” the state of your project library.

                <pre style="width: fit-content;"><code data-trim class="language-bash">
                  renv::init()
                  renv::snapshot()  # save
                  renv::restore()   # load
                </code></pre>

                Self-study: <a href="https://carpentries-incubator.github.io/reproducible-publications-quarto/15-renv.html">Carpentries Lesson</a>
              </div>
            </section>

            <section data-state="standard">
              <h2>Upload to GitHub</h2>

              <ul>
                <li><b>Add</b></li>
                <ul>
                  <li>VS Code: click '+' next to 'Changes' (or files)</li>
                  <li>RStudio: click 'Staged'</li>
                  <ul>
                    <li>N.B.: also include <code>.RProfile</code> and <code>activate.R</code></li>
                  </ul>
                  <li>git: <code>git add [filenames]</code></li>
                </ul>
                <li><b>Commit</b></li>
                <ul>
                  <li>IDEs: Write "add dependencies", click 'Commit'</li>
                  <li>git: <code>git commit -m "add dependencies"</code></li>
                </ul>
                <li><b>Push</b></li>
                <ul>
                  <li>IDEs: Click 'Push'</li>
                  <li>git: <code>git push</code></li>
                </ul>
              </ul>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                ## Take-Away

                - Recording dependencies <em>with versions</em> can make it easier for another person to execute your code
                  - ⚠️ Another person is you, in three months ⚠️ <!-- .element: class="fragment" -->
                - There are many tools to record dependencies <!-- .element: class="fragment" -->
              </textarea>
            </section>
          </section> <!-- end of Software Dependencies -->

          <section> <!-- start of Software Documentation -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Software Documentation -->

          <section> <!-- start of Code Conventions and Modular Coding -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Code Conventions and Modular Coding -->

          <section> <!-- start of Next Steps: How to make your code reusable -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Next Steps: How to make your code reusable -->

          <section> <!-- start of Work on Your Own Project -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Work on Your Own Project -->

          <section> <!-- start of Reusability Check -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Reusability Check -->

          <section> <!-- start of Wrap-Up -->
            <section data-state="standard">
              <h2>html slides</h2>
              <p>content</p>
              <p>with html</p>
            </section>

            <section data-state="standard" data-markdown>
              <textarea data-template>
                # Header

                - list item
                - another one
              </textarea>
            </section>
          </section> <!-- end of Wrap-Up -->

        <!-- END YOUR SLIDES -->
      </div>
    </div>

    <script src="dist/reveal.js"></script>

    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/math/math.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/search/search.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/escience/escience_5.1.0.js"></script>
    <!--
    <script src="reveal.js/4.3.1/reveal.js-plugins/menu/menu.js"></script>
    -->


    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Automatically activate the scroll view when we the viewport falls
        // below the given width.
        scrollActivationWidth: 0,  // disabled

        // Force the scrollbar to remain visible
        scrollProgress: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, Escience ]
      });

      // auto-scrolling
      let animationId = null;
      let running = false;

      const list = document.getElementById("scrollList");
      const content = document.getElementById("scrollContent");

      // Duplicate list a few times to fudge infinite scroll
      list.innerHTML += list.innerHTML;
      list.innerHTML += list.innerHTML;
      list.innerHTML += list.innerHTML;
      list.innerHTML += list.innerHTML;

      let y = 0;
      const speed = 0.1; // px per frame
      let loopHeight = 0;

      function start_scrolling() {
        if (running) return; // prevent duplicates
        running = true;

        // Measure after layout is complete
        loopHeight = list.offsetHeight;

        function animate() {
          if (!running) return;
          y += speed;

          if (y >= loopHeight) {
            y = 0;
          }

          content.style.transform = `translateY(-${y}px)`;
          animationId = requestAnimationFrame(animate);
        }

        animate();
      }

      function stop_scrolling() {
        running = false;
        if (animationId) {
          cancelAnimationFrame(animationId);
          animationId = null;
          console.log("stop scrolling");
        }
      }

      Reveal.on('slidechanged', event => {
        if (event.currentSlide.getAttribute('data-state').includes('scroll')) {
          start_scrolling();
          console.log("start scrolling");
        } else {
          stop_scrolling();
        }
      });
    </script>
  </body>
</html>
